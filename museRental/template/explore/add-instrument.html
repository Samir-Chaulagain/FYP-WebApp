{% extends 'base.html' %}
{% load static %}
{% block content %}

<!-- HOME -->
<div class="text-center bg-image"
  style="
      background-image: url('{% static 'img/about/aboutus2.jpg' %}'); height: 400px; background-repeat: no-repeat; background-size:cover; margin-top:-100px">
  <div class="text-light pt-5" style="margin-top: 100px;">
    <h1 class="display-4">Add Item</h1>
  </div>
</div>

<section class="site-section">
  <div class="container">
    {% if form.errors %}
    {% for field in form %}
    {% for error in field.errors %}
    <div class="alert alert-danger alert-dismissable">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
      <strong>{{ field.label }}: {{ error|escape }}</strong>
    </div>
    {% endfor %}
    {% endfor %}
    {% endif %}


    <form method="POST" enctype="multipart/form-data" action="{% url 'explore:add_item' %}" >
      <div class="row p-md-5 border rounded">
        <div class="col-lg-12">
          {% csrf_token %}
    
          {% for field in form %}
          
          {% if field.name == 'item_type' %}
          <div class="form-group mt-2">
            <label for="item-type">Item Type</label>
            <select name="item_type" class="selectpicker border rounded" id="item-type" data-style="btn-black" data-width="100%"
              data-live-search="true" title="Select item Type">
              <option value="1">Solo</option>
              <option value="2">Package</option>
              <option value="2">Other</option>
          
            </select>
          </div>
          
          {% elif field.name == 'category' %}
          <div class="form-group mb-2">
            <label for="item-type">Category</label>
            <select name="category" class="selectpicker border rounded" id="item-type" data-style="btn-black" data-width="100%"
              data-live-search="true" title="Select item Type">
          
              {% for category in categories %}
          
              <option value="{{ category.id }}">{{ category.name }}</option>
          
              {% endfor %}
            </select>
          </div>
          
          {% elif field.name == 'description' %}
          <div class="form-group mt-2">
            <label for="item-type">Description</label>
            <div class="">
              {{ form.media }}
              {{ form.description }}
            </div>
          </div>
          
          
          
          {% else %}
          
          <div class="form-group mt-2">
            <label class="text-black" for="id_{{ field.name }}">{{ field.label }}</label>
            <input type="{{ field.field.widget.input_type }}" class="form-control" name="{{ field.name }}"
              id="id_{{ field.name }}" placeholder="{{ field.field.widget.attrs.placeholder }}">
          </div>
          {% endif %}
          {% endfor %}

          <!-- <div class="form-group mt-2 dropzone dz"id="my-dropzone">
            <div class="fallback">
              <input type="file" name="file" id="file" />
            </div>
          </div> -->

          <div class="form-group mt-2">
            <input type="file" name="file" id="fileInput" multiple required>
          </div>
    
        </div>
      </div>
      <input class="btn btn-block btn-primary btn-md" type="submit" value="Submit">
    </form>



    


  </div>





</section>


<!-- <script>
   var myDropzone = new Dropzone("#my-dropzone", {
      url: "{% url 'explore:add_item' %}",
      paramName: "file",
      
      maxFilesize: 5,
      addRemoveLinks: true,
      dictDefaultMessage: "Drop files here or click to upload",
      headers: {
        "X-CSRFToken": "{{ csrf_token }}"
      },
      success: function (file, response) {
        // Handle success, if needed
        console.log(response.message);
      },
      error: function (file, response) {
        // Handle errors, if needed
        console.log(response.message);
      }
    });

</script> -->

<script>
  document.getElementById('fileInput').addEventListener('change', function () {
    // Get the selected files
    var files = this.files;

    // Check if the number of files exceeds the limit (5 in this case)
    if (files.length > 5) {
      alert('Please select up to 5 files.');
      this.value = ''; // Clear the selected files
    }
  });
</script>

{% endblock %}